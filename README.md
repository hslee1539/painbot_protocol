# painbot protocol module

## 흐름

> 아래 흐름은 PlotCoroutin.py 를 실행하여 __main__이 실행 될 때의 흐름입니다.

|   ParserCoroutine |   방향    |   main    |   방향    |   PlotCoroutine   |
|   --------------  |   ---     |   ---     |   --      |   --------------  |
|                   |           |   시작    |           |                   |
|                   |   <-    |   ParserCoroutine 생성|     |             |
|   시작 문자 요청 메세지 (str)|  ->    |           |            |                       |
|                   |           |   PloatCoroutine 생성 | -> |                |
|                   |           |          |   <- |   저주파 전류값 요청 메세지 (str)      |
|                   |           |   시리얼 통신 초기화  |   |               |
|                   |    <-       |   시리얼에서 1byte read (int)   |   |       |
|   시작 문자 체크      |           |          |        |                  |
|   초음파 모드 요청 메세지 (str) |    ->      |       |   |   |
|   |   |   요청 메세지가 아닌지?   |   |   |
|   |   <-  |   시리얼에서 1byte read  (int)  |   |   |
|   유효한 값인지 체크  |   |   |   |   |
|   초음파 출력값 요청 메세지 (str)   |   ->  |   |   |   |
|   |   |   요청 메세지가 아닌지?   |   |   |
|   |   <-  |   시리얼에서 1byte read (int) |   |   |
|   유효한 값인지 체크  |   |   |   |   |
|   저주파 모드 요청 메세지 (str)   |   ->  |   |   |    | 
|   |   |   요청 메세지가 아닌지?   |   |   |
|   |   <-  |   시리얼에서 1byte read (int) |   |   |
|   유효한 값인지 체크  |   |   |   |   |
|   저주파 출력 값 요청 메세지 (str)    |   ->  |   |   |   |
|   |   |   요청 메세지가 아닌지?   |   |   |
|   | <-    |   시리얼에서 1byte read (int) |   |   |
|   유효한 값인지 체크  |   |   |   |   |
|   저주파 펄스 값 요청 메세지 (str)    |   ->  |   |   |   |
|   |   |   요청 메세지가 아닌지?   |   |   |
|   |   <-  |   시리얼에서 1byte read (int) |   |   |   |
|   유효한 값인지 체크  |   |   |   |   |
|   저주파 전류값 요청 메세지 (str)  |   ->  |   |   |   |
|   |   |   요청 메세지가 아닌지?   |   |   |
|   |   <-  |   시리얼에서 1byte read (int) |   |   |   |
|   유효한 값인지 체크  |   |   |   |   |
|   만들어진 데이터 전달 (dict) |   ->  |   |   |   |
|   |   |   요청 메세지가 아닌자?   |   |   |
|   |   |   받은 데이터에서 저주파전류값 전달 (int) |   ->  |   |
|   |   |   |   |   전처리  |
|   |   |   |   |   화면 갱신   |
|   |   |   |   <-  |   저주파 전류값 요청 메세지 (str) |
|   ~   |   ~   |   ~   |   ~   |   ~   |




## 분기

master

develop

## 구현 리스트

### 세팅

9600, 8, N, 1

|   인덱스  |   내용    |   예      |
|   --      |   --      |   --      |
|   0       |   STX     |   0x02    |
|   1       |   초음파모드| 0:Continuous 1: Pulse   |
|   2       |   초음파출력값|   0~3 |
|   3       |   저주파 모드 |   0:Continuos 1: Interval |
|   4       |   저주파출력값|   0~50    |
|   5       |   저주파펄스값|   0:500uS 1: 250uS (182Hz)    |
|   6       |   저주파전류값|   0~100   |

총 7바이트 데이터를 받음.

### 참고


